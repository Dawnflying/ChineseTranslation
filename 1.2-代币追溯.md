# 代币追溯：比特币、区块链以及其他分布式账本

区块链网络建立在P2P网络理念的基础上，它提供了一个每个行动者都可以信任的通用数据集，即使他们彼此之间可能不认识或者并不信任对方。数据不可篡改的副本在网络的每个节点上被存储和管理。原生网络代币形式经济激励措施的应用使得网络具有容错性、抗攻击性和抗合谋性。

~

"成链区块"这个概念是在2008年10月发布的比特币白皮书中提出的，目的是创造 "不需要银行的P2P货币"。这篇以中本聪为笔名发表的论文提出了一个系统，在这个系统中，网络中的所有计算机都持有一份相同的交易账本，来作为网络中每个人的单一参考点。所有网络节点共同更新和管理这个账本，它代表了一个每个行动者都可以信任的通用数据集，即使他们可能不认识或者不信任对方。在没有银行、互联网平台或其他类型的清算机构等可信的第三方的前提下，人和机构就算彼此不认识或不信任、处在在不同国家、受不同司法管辖、彼此之间没有协议进行法律约束，现在也可以通过互联网进行互动。

双花问题：这种新的分布式数据管理形式解决了互联网上的双花问题。当今互联网的设计方式，让一个人可以多次消费以数字文件的形式发行的同样的价值，因为数字信息可以被复制，而且同一数字文件的副本可以同时从一台计算机发送到其他多台计算机。在比特币出现之前，围绕着密码学安全的P2P网络的想法已经在不同的演化时期被讨论过，大多数是在1980年代以来的理论论文中（阅读更多：Annex - Origins of Bitcoin）。然而，从来没有一个实际使用的P2P网络在不需要可信的中间人保证价值交换的前提下，避免了双花问题。比特币协议引入了一种机制，使复制数字价值的代价变得很高昂。

区块链：在区块链网络中，代币交易被记录在被称为 "区块 "的批量数据中，这些数据就是 "哈希"。这种加密哈希创建了区块的数字指纹(阅读更多：第1部分 —— 代币安全：密码学。)每个区块都包括前一个区块的哈希值，从而将一个区块与另一个区块链接成区块链。这个过程保证了所有区块的历史完整性，可以追溯到的第一个区块，也被称为创世区块。如果一个区块中的数据被篡改，该区块和所有后续区块的哈希值就会发生变化，网络中的每个节点都会知道数据被篡改了。这个不断增长的链式区块列表也被称为账本。

这个账本是一个维护着不断增长的交易记录清单的账本，这些记录以加密的方式串联在一起，防止被篡改和修改。 如果有人试图进行操纵，被操纵账本的哈希值将与所有其他节点上的账本副本上记录的哈希值不一致。因此，区块的哈希值可以作为一种防伪保护，用于检查账本上交易的真实性。

分布式账本：分布式的副本存储在加密保护的P2P网络的多个节点上。要改变整个网络中所有账本副本上的数据，网络节点需要就这种改变达成相互协议。分布式账本是一个共享的、可信的、公开的交易账本，每个人都可以检查，但没有一个用户控制它。每个独立的节点都拥有最新版本的账本，其中包含了所有曾经发生过的交易，并且可以验证交易。这个过程被称为 "共识"。这在组织间的设置中特别有用，因为在这种情况下，没有一个机构愿意信任另一个机构对其数据的管理。

代币："代币 "一词只是一个比喻。与比喻可能暗示的不同，代币并不代表从一个设备发送到另一个设备的数字文件。相反，它表现为账本中属于区块链地址的一个条目。只有拥有该地址私钥的人，才能使用作为区块链客户端的钱包软件，访问相应的代币（阅读更多：第一部分 —— 代币安全：密码学、钱包。

![](https://github.com/Token-Economy-Book/ChineseTranslation/blob/main/pics/1.2-1.png)

与数据是分布式的，但由一个单一实体管理和控制的分布式数据库不同，区块链网络允许分布式控制。不需要中央管理员，互相不信任的不同人和机构也可以共享信息。

就像云端的电子表格：账本也可以被描述为云端的电子表格。想想像 "Google Sheets "这样的云应用，每个人都可以同时访问和编辑一个文件。但是，与 文件集中存储在Google服务器上的"Google Sheets "相比，区块链网络的账本是一个不集中存储的文件。相反，网络中的每个节点都会随时保存同一个文件的相同副本（每次创建新区块时会有短暂的例外情况）。
通用状态：作为整个网络中的通用数据集，网络中的每台计算机都管理着自己相同的账本副本，这保证每个代币只传输一次。因此，账本代表了网络中所有节点都同意的通用状态。它是一个数字化公证员，也是一个可公开核查的时间戳。

比特币交易：当使用比特币网络时，与银行验证金融交易不同的是， 网络中的所有计算机都会检查他们的账本副本是否有效， 并通过多数节点的共识来确认交易。每个用户都具有相同的信任等级。由运行区块链协议的计算机组成的P2P网络不是由单一的受信任的第三方通过其服务器权威地验证交易（单票制），而是通过共识（多票制）验证交易。


	 
![](https://github.com/Token-Economy-Book/ChineseTranslation/blob/main/pics/1.2-2.png)



协议是一套规则和流程，它定义了网络中所有（匿名）节点如何就网络的真实状态达成协议。协议定义了网络中的参与者相互交流的方式：在哪些条件下，从A向B发送代币是有效的；用加密代币验证交易的经济回报；如何引用身份并签署交易；以及谁来决定进行网络升级。

加密经济学：加密技术保证了网络的安全，为所有参与者提供了充分的透明度，同时维护了每个行为者的隐私。它还可以确保过去的交易是真实的。假设所有网络行为者都有可能腐败，博弈论被应用于确保未来的交易将以可信的方式，通过所有网络行动者的多数共识进行。设计共识机制是为了让人们难以操纵账本。

共识："工作证明 "建立在加密经济原则的基础上，是比特币网络使用的 "共识机制"，它引导着未知的匿名网络行动者的集体行动。反向博弈论被用来奖励网络行为者的原生网络代币。在比特币网络中，使用比特币代币。这种奖励机制的设计是为了使欺骗网络在经济上不可行，因为这样做需要大量的计算能力，并考虑到了极端的攻击场景。尽管没有中心化的各方来管理网络活动的真实性，但共识规则的设计使网络具有抗攻击能力。

身份：区块链地址来源于私钥，代表代币所有者的假名数字身份。代币被注明属于公共账本中的某个地址。只有该地址的所有者才能请求将这些代币发送到其他地方。为了向网络的其他参与者证明他们的所有权，代币持有者需要用他们的私钥签署交易。这种形式的身份管理纯粹基于数学函数，允许网络中的其他计算机确认交易的有效性，而不需要知道实际人的身份或他的私钥（阅读更多：第一部分 —— 密码学和以用户为中心的身份）。

会计与治理机器：区块链网络，也可以说是分布式会计机，或者叫做公开透明的超国家治理机。它们为互联网提供了一个治理层。所有的网络参与者都可以平等地且几乎实时地访问相同的数据。交易是集体管理的。它们对所有参与者都是透明的，并且可以追溯到它们的起源。

分布式自治组织（DAO）：账本由自主的网络节点集体管理，这也是为什么它也预示着一种新的组织基础设施形式，通常被称为分布式自治组织（阅读更多：第2部分--DAO的制度经济学与治理；第4部分：目标驱动的代币）。

区块浏览器：由于区块链网络的公开性，每个人都可以在账本上运行大量数据，比如跟踪所有代币交易、网络总哈希率、代币供应量和交易增长等。然而，虽然账本上的所有数据都是公开的，但很少有人拥有在区块链上进行高级数据分析的技能。区块浏览器是第三方应用程序，允许任何人公开搜索特定网络的所有交易，如比特币以及其他共有区块链网络。区块浏览器就像区块链相关数据的专用搜索引擎。然而，这种高透明度也引发了与隐私相关的问题。这些与隐私相关的问题正在通过较新的区块链协议来解决，这些协议使用了更多的隐私保护加密方法。（阅读更多：第三部分 —— 隐私代币）

 
## 加密经济学，共识和工作量证明（PoW）

拥有一组匿名网络节点的P2P网络所面临的根本挑战是：如何在没有中心化的各方来保护系统安全的情况下处理恶意网络节点。我们必须始终假设会有不良行为者试图破坏任何开放的公共网络。在不受信任的前提下，这样一个分布式网络如何能够就哪些数据是正确，或者哪些过程是真实的达成共识呢？这就是所谓的 "拜占庭将军问题"。一个恶意节点，也被称为拜占庭节点，它可以故意向所有参与共识过程的其他节点发送错误信息。拜占庭故障被认为是分布式网络中最困难的一类故障。可靠的共识机制必须能够抵御DDoS（分布式拒绝服务）攻击、sybil攻击和其他网络攻击。在比特币出现之前，人们认为在P2P网络中，不信任的节点之间不可能达成容错和抗攻击的共识。

在分布式计算的历史上，比特币协议首次引入了 "工作量证明 "（Proof-of-Work）的数学解决方案，使得攻击系统的经济成本与攻击系统的收益不成比例。它促使了一个围绕使用密码学工具进行经济协调博弈的新科学领域的出现，也被称为 "加密经济学"（Cryptoeconomics）。加密经济学可以定义为：研究在不受信任环境中的经济互动，在这种环境中，每个行为者都有可能是腐败的。它是跨学科的，需要深刻理解密码学、经济学和P2P网络，以及网络行为者的动机。公私钥基础设施保证了一个人的代币的抗攻击访问控制。哈希函数允许节点验证在网络上完成的交易。哈希函数和公钥私钥密码学也是被称为工作量证明的经济协调游戏所需要的，用于奖励将真实的交易区块添加到账本中的员工。加密经济机制可以带来一个安全平衡，使网络具有容错性，以及抗攻击和抗合谋性。这使得匿名网络节点可以就所有网络交互的状态达成共识。比特币网络是加密经济学的第一个实用实例。它产生的是 "数学上的信任"，而不是 "法律契约上的信任"。

然而，关于网络行为者如何对经济激励措施作出反应的假设是否有弹性，是安全与否的决定性因素。长期以来，人们怎样对激励措施作出反应一直是经济学的一个研究领域。因此，加密经济学与机制设计有很多共同之处，机制设计是与博弈论相关的经济学领域。博弈论分析战略互动，这被称为博弈。它试图在两个玩家都最大化自己的最佳结果时，理解每个玩家的最佳策略。机制设计定义了理想的结果，并逆向创建一个激励玩家向该理想结果发展的游戏。虽然加密经济学是跨学科的，但它是一门主要在计算机科学界发展的学科。看来，还有很大的空间可以结合各种经济学科以及其他学科的方法（更多内容将在下一章和第四章——目标驱动的代币中介绍）。


	
![](https://github.com/Token-Economy-Book/ChineseTranslation/blob/main/pics/1.2-3.png)

"工作量证明"（PoW）是比特币网络和类似的区块链网络中使用的共识机制，以保证通过网络发送的代币交易是有效的。该机制建立在所有网络节点都有可能会有腐败行为的假设之上，最小的共同点是金钱。工作量证明的设计方式是：(i)如果你花钱并遵守规则，就可以赚取网络代币；(ii)由于挖矿需要特殊用途的计算机硬件，并且消耗大量的电力，所以作弊并不划算。

当代币通过网络发送时，网络中的每个节点都可以写入新的条目到账本中。这些节点对交易进行验证，并相互竞争，来解决一个复杂的计算难题。在这个过程中，他们必须收集所有最近的网络交易，包括一些额外的元数据，验证交易，猜测一个伪随机数（"nonce"），并通过加密算法（SHA-256）运行所有数据，以找到新块的哈希值。这意味着他们必须进行计算工作，这就是为什么这个过程被称为 "工作量证明 "的原因。

如果某个节点是网络中第一个找到该哈希值的节点，它就可以将该区块添加到它的账本中，并将新区块的哈希值（包括所有区块数据）广播给网络中的其他节点。其他节点就可以验证哈希值的有效性。如果他们认为这个新添加的交易区块有效，就会将新区块添加到他们的账本副本中。工作量证明的设计方式是，散列值很难找到，而解决方案却很容易被验证为真。通过参与这场寻找哈希值的竞赛，挖矿节点共同确保一个区块中包含的所有交易都是有效的。胜出的节点将获得 "区块奖励"，其形式为新铸造的网络代币（加上潜在的交易费用）。这就是这个过程被称为 "挖矿"的原因。因此，经过验证的区块的哈希值代表了矿工所做的工作。在本书出版时，比特币网络中成功创建区块的奖励是每个区块6.25 BTC。每隔21万个区块，区块奖励会减少50%，大约每四年一次。下一次区块奖励的 "减半 "是在2024年。

找到正确的哈希值需要做一些工作，其形式是计算机的处理时间，这也被称为 "CPU成本函数"。如果作弊的矿工是找到哈希值最快的计算机，那么网络中的其他计算机就不会接受他们的交易区块。因此，作弊的矿工将无法获得区块奖励，即使他们投入了计算力和能量。 这是一种阻止网络攻击的经济措施。因此，一个理性的经济行为者会避免欺骗系统，因为这将带来能源和基础设施投资的沉没成本。通过基础设施和电力成本的后门，网络攻击的成本变得非常高。一次成功的攻击需要大量的计算力、能耗和时间。由于计算强度大，比特币网络也非常耗能。
为了保持10分钟的区块间时间相对恒定，寻找哈希值，进而创建区块的 "难度 "会随着时间调整。根据矿工网络部署的算力函数会定期调整。如果创建区块的时间少于10分钟，难度就会增加。同样，如果创建区块的时间超过10分钟，难度就会降低。难度也会随着竞争程度的增加而增加 —— 验证一个区块的其他计算机的数量。


![](https://github.com/Token-Economy-Book/ChineseTranslation/blob/main/pics/1.2-5.png)

## 网络节点
比特币网络的特点是：1.开源，2.公开，3.无需权限。开源是指任何具有足够能力的人都可以以公开的方式为协议做出贡献。而且，任何人都可以拿到代码，修改代码，创建自己版本的P2P支付网络。"公开 "是指任何人都可以将网络作为支付系统（用户），任何人都可以下载协议和账本并验证交易（完整节点）。"无需权限 "是指任何人都可以下载协议和账本，并向账本写入交易（矿工）。在比特币网络中，有四种类型的节点：全节点、挖矿节点、矿池和轻节点。

全节点管理着比特币网络（账本）的整个历史，并在新交易加入账本时对其进行验证。任何运行这样全节点的人都可以发送和接收比特币代币，并验证交易的完整性，无需依赖任何第三方。验证交易是对比特币挖矿的补充功能。比特币挖矿几乎都是在专门的硬件上完成的，而只验证交易的完整节点配备标准的处理硬件就可以在普通的家用PC上运行。比特币网络的早期，每个人都必须下载完整的账本才能发送交易。如今，钱包软件开发商也提供了轻节点这样的选择（见下文）。

挖矿节点(矿工)争夺创建新区块和向账本添加交易的权利。他们可以 "单独挖矿 "或 "矿池挖矿"。如果他们单独挖矿，他们需要维护自己账本的完整副本。获胜的矿工会因创建新区块而获得比特币代币奖励（区块奖励）。具体奖励机制在协议中规定。除了区块奖励外，矿工还可以赚取交易费。然而，这些交易费并不是协议规定的，可以由矿工在自由市场上提出要求。交易费通常在网络流量大、网络拥堵时增加。

矿池：这些年来，个人矿工逐渐开始合作，形成挖矿节点联盟。在矿池方案中，个人矿工与其他矿工合作，向账本写入新交易并获得区块奖励。矿池运营商维护一个完整的节点，各个矿工贡献他们的CPU（也称为算力）。利用所有个人矿工的累计算力，他们可以提高自己成为最快解决难题的计算机的机会，并将一个区块交易写入账本。然而，最初的比特币白皮书并没有考虑到矿工之间的这种合作形式。经济假设建立在 "简单博弈论 "的基础上，而不是 "协作博弈论"。因此，比特币网络已经成为一个比最初设想的更加中心化的系统。因此有人认为，现实中比特币的共识机制可以说是 "代表的工作量证明"，已经被少数矿池的寡头垄断，这可能并不能反映比特币创造者中本聪的初衷。

轻节点是为了简化智能手机钱包应用的支付验证（simplified payment verification，SPV）而创建的。这就是为什么它们也被称为SPV节点或SPV-clients。与完整节点相反，它们不维护整个账本，只存储所有交易区块的所有头部的副本。它们不能自主验证交易，因为它们无法访问存储在账本上的所有信息。轻节点依赖于网络中其他对等体给出的信息，这些对等体可以访问所有账本数据。

与挖矿节点相比，全节点并没有验证交易的直接经济动机。然而，不运行轻节点而运行全节点有间接的激励。在可能发生协议升级的情况下，运行全节点是投票决定网络应该如何升级的唯一方式。运行全节点的另一个原因是更高的隐私度，因为全节点在自己的设备上维护完整的账本和所有交易数据。这与轻节点的工作方式完全不同。轻节点依靠第三方服务器向网络广播交易，这意味着这些第三方服务的服务器可以获取轻节点的交易历史。

## 网络攻击
账本上的所有条目都是只读的。一组交易一旦被网络接受，就不能轻易更改或删除。想要更改和删除，所有的区块都必须重新计算，这就需要大多数网络参与者对这种改变达成一致。攻击者需要在大多数网络节点上重做所有后续区块的计算工作。这就需要控制或贿赂大多数网络节点。即使可以在区块创建期间进行这些计算，其成本也会远远高于攻击网络的回报。虽然操纵是可能的，但该机制的设计使其不可行。

	
这些网站提供了关于目前攻击不同区块链网络的所谓 "51%攻击 "成本的实时信息。只要有超过50%的工作是由诚实的矿工投入的，那么工作证明网络就是安全的。当一个人或机构能够控制大部分的算力或计算能力来操纵网络时，就会发生 "51%攻击"。在比特币的十年历史中，没有任何外部攻击者的操纵成功。

检查攻击比特币网络成本的在线工具。
https://gobitcoin.io/tools/cost-51-attack/

检查攻击不同区块链网络成本的在线工具。
 https://www.crypto51.app/

成功的51%攻击可能会产生以下影响。它可以让你：1.通过添加或删除交易来改变区块，这需要额外的PoW(交易越旧，攻击越难)；2.审查参与者，从而审查这些参与者的交易；3.发送交易，然后逆转交易；4.改变协议规则。

51%攻击不能做的是改变现有的交易或伪造交易，比如：1.改变现有交易中发送的金额；2.改变现有交易的收件人；3.未经某人批准就发送他的代币。这是因为所有的交易都需要用代币拥有者的私钥来签署，而私钥是不能通过网络的多数人同意来透露的。改变现有交易中的一个细节会使账本变得 "不合法"，因为其中没有有效签名的交易会。这些类型的操纵只能通过暴力获取网络行为者的私钥来实现。另外，人们也可以通过破坏加密算法（SHA）来攻击网络，这就是为什么必须使用经过适当压力测试的加密算法的原因（阅读更多内容：第1部分--代币安全：密码学）。


![](https://github.com/Token-Economy-Book/ChineseTranslation/blob/main/pics/1.2-6.png)

## 协议分叉及网络分叉
在软件工程领域，"软件分叉 "指的是，任何自由和开源软件都可以在不违反版权法的前提下，不经原开发团队的事先许可而进行复制和修改。这个术语有时也不仅仅指代码指，也指现有项目的开发者社区的分叉。公有区块链网络的开源性质允许任何人下载代码，修改代码，并创建一个基于某段代码的独立网络。

这样一来，人们可以：1.通过简单复制现有的代码库，并对其进行修改，从零开始创建一个新的网络（例如 "Zcash "和 "Litecoin "就是基于比特币代码库）2.为了协议更新，将现有的网络（包括现有的账本和社区）分叉成不同的延续。这些协议更新可能会因为协议升级纠纷而导致网络分叉（如 "比特币现金 "和 "以太坊经典 "的情况），也可能是出于经济原因而故意分离，其目的往往是为了在任何哲学协议讨论之上提取经济价值（如 "比特币黄金"、"比特币钻石 "和 "比特币铂金 "的情况）。软件分叉的类型和规则取决于每个网络的正式和非正式协议。比特币网络及类似的网络有 "硬分叉 "和 "软分叉 "之分："

“硬分叉”是一种不向下兼容的协议变更。不更新到新版本协议的节点将无法处理交易。所有根据旧协议验证交易的节点都会将视根据新协议产生的区块为无效。因此，想要采用新协议的节点将需要升级其软件。 

“软分叉”是一种向下兼容的协议变更。没有更新协议的节点如果不违反新的协议规则，仍然能够处理交易。运行升级协议的矿工产生的区块会被网络中的所有节点接受。运行旧版本的矿工产生的区块会被运行新版本协议的节点拒绝。如果旧版本矿工的区块被部分网络拒绝，他们可能也会倾向于升级。因此，软分叉的投票过程比硬分叉更循序渐进一些，需要几周时间。如果大多数矿工升级到新协议，则被称为矿工激活的软分叉（MASF）。如果全节点协调，没有矿工的支持，则称为用户激活的软分叉（UASF）。

当网络中的一些节点继续使用旧协议，而其他节点使用新协议时，就会发生分叉。技术协议更新的频率相当高，通常不会引起太大的争议，尤其是当它们涉及到很小的技术升级时。比较短的链失效，代币变得没有市场价值。然而，区块链网络的短暂历史表明，更政治化的协议升级决定会导致网络的分叉，少数链有足够的追随者或执政理念来维持自己的经济。这其中的一个关键方面是支持一个网络或另一个网络的开发者的思考力分叉。随着社区的分叉，开发者往往不得不为一个网络或另一个网络表态，这可能导致缺乏必要的开发者力量。矿工们也不得不选择继续支持哪个网络（阅读更多：第二部分--DAO的制度经济学与治理。）

在硬分叉的情况下，任何在旧网络中拥有代币的人也将在新的少数派网络中拥有同等数量的代币，然后他们可以出售或持有这些代币。不过，这至少需要一个代币交易所将少数派网络的新代币上市，否则，该网络的代币就没有市场，结果就是这个网络会逐渐被遗忘。政治化的硬分叉是一个黑天鹅事件，可能会对自己的代币价值产生严重影响，这取决于哪个网络将在长期内发展更佳。政治化硬分叉分叉网络的例子是 "以太坊经典"（ETC）和 "比特币现金"（BCH）。由于这些比特币网络和以太坊网络的著名分叉，治理问题在社区中引发了持续的争论，似乎也是未来几年比较值得关注的研究问题之一（阅读更多：第二部分——DAO的制度经济学与链上与链下治理）。)

此外，由于网络延迟的原因，网络中的时间性分叉也会意外发生。如果两个矿工在同一时间为同一区块找到了不同的解决方案，并且都是有效的，那么网络就有可能暂时分叉。当这种情况发生时，网络中的节点在网络的不同部分拥有两个替代版本的账本。这就形成了两个平行的区块链网络。比特币协议有一个规定来解决这些暂时性分叉，从而使网络中只有一个分支存活下来。在像比特币这样的工作量证明的网络中，拥有最多 "累积工作量证明 "的网络，也叫做 "算力 "或 "网络算力"，总是被网络节点认为是有效的网络。在这个过程中，获胜的账本版本由网络的多数 "投票 "决定。节点通过升级协议（或不升级）来投票支持一个版本："区块链的长度 "指的是累计工作量证明最多的网络分支，而不是区块最多的分支。


## 可替代分布式账本系统
上述的分叉是现有区块链网络协议升级所致，这使现有网络节点分为两组。这种分叉会影响该网络代币的价格，同时使两个分叉后的网络比原来的小。另一种分叉则是针对开源项目的简单代码分叉。比如，比特币的代码库是开源的，任何人都可以把这个库当作模板，然后调整变量、参数或函数来创建替代的区块链网络。

过去几年间，人们为了创造出更快、更加匿名的替代版本的比特币，对比特币的协议进行了数百次改进，诞生了“Litecoin”或”Zcash“这样的项目。从某种意义上，我们可以明确的是，区块链协议为一群互不相识，互不信任，但有相同的某个目标的人组织在一起提供的操作系统，而不只是“非银行系统的钱”。因此，许多项目为了改进其他类型的P2P价值转移方式，尝试去改进比特币的代码库，比如脱离亚马逊网络服务的去中心化文件存储项目“Sia”，脱离脸书、推特的社交媒体“Steemit”。这种思想抛弃了只适用于单个智能合约的单一目的网络，建立了一种协议，这种协议使人们可以用同一个网络进行任何形式的P2P价值传输。有些早期项目十分有趣，比如“Colored Coins”以及“Mastercoin”。他们把比特币用作任何价值传输或合法协议的依托工具。Vitalik Buterin短暂参与过这些项目，同时也意识到，这类的比特币协议改进虽然可行，但不够高效或不够灵活。随后，他提出将智能合约功能从处理功能中分离，并开启了以太坊项目。它提供了一个较比特币网络和其他特殊用途的区块链网络更为灵活的开发环境。以太坊网络首次提出了通过智能合约进行任何形式的价值转移的去中心化网络。通过几行代码即可轻松创造智能合约，并通过以太坊网络处理，不再需要创建特定目的区块链基础设施。与为解决P2P汇款的单一智能合约设计的比特币网络不同的是，以太坊网络设计之初就是去中心化电脑网络，并使用以太坊虚拟机（EVM）处理任何智能合约，以及转移任何类型的代币化价值（详见第二部分-智能合约，第三部分-代币）。

以太坊的出现启发了许多后来的区块链项目，它们开发了类似的智能合约网络，此类项目包括：“Cardano“、“Neo”、“EOS”、“Hyperledger Fabric”、“Ontology”以及其他项目。对其可行性的评估涉及到多个因素，比如技术、经济和法律。目前还不清楚哪个以太坊替代方案会流行起来，会出现“赢者通吃”的情况还是会多个网络并存的情况。目前而言，以太坊社区好像有着最大的吸引力，在众多开发者中拥有先发优势，但仍未尘埃落定。

进一步而言，替代的分布式账本系统的出现伴随着完全不同的共识机制，比如向无环图（DAGs），它不需要创建一条链的区块，而是使用替代的加密经济机制来实现共识。使用DAGs作为共识机制的网络有“IOTA”、“Byteball”和“Nano”。

另外，如银行、保险公司这类的私人机构，以及许多重供应链产业意识到，通过分布式账本系统合作管理信息的概念，能成为一个有效的产业合作工具。与公共的、无需许可的区块链网络相反，该产业开始设计“需许可的账本”，每个验证者都是产业联合体的一员，或至少是同一个组织的细分合法实体。然而，在需要许可且私密网络中使用“区块链”这个词汇是十分有争议的。批评家们质疑到，一个“经权威机构认证”的，需要许可的账本连是不是区块链网络都值得怀疑。需许可账本的支持者认为，“区块链”这个词可用于任何交易被分为一个个相连的区块的分布式数据结构，因此也适用于在成链的区块上分批处理交易的需许可网络。

公共网络使用加密经济机制（基于数学的信任性），一个为实现共同目标激励个体行动（贡献算力）的共识机制来保护网络。激励机制与网络代币密切相关。保护互不信任的用户免受攻击或网络被篡改是非常有必要的。从另一个角度讲，需许可的网络是由相互熟识且信任的一群用户管理的，这不需要像工作量证明、代币这样的高强度计算共识机制。信任依托于法律系统以及相互认识的网络用户的声誉（基于法律合约的信任度）。这些网络最后的共性在于它们都有分布式账本。这也是为什么“分布式账本”这个词更为广泛地描述了从比特币网络中衍生出来的技术。它们有的需要许可，有的不需要，有的将交易捆绑于成链的区块中，有的如IOTA完全没有使用成链区块。

区块链协议以及类似的分布式账本基于互联网操作，它们可概念化为几个部分：（1）物理网络：由运行相同协议的电脑P2P网络为代表；（2）协议：决定网络规则，并借助所有网络节点的共识强制执行规则，包括与本地代币相关的经济激励。（3）账本：用共享的、公共的账本记录交易的方式管理所有资产，从最初的区块到今日都是如此；（4）身份认定与寻址：属于身份的资产需要被定位，这样我们才能相互转移价值。这些身份或多或少是匿名的，这取决于使用的加密算法的类型；比如像以太坊智能合约网络；（5）通过智能合约管理相关活动方用户，并反映了其商业与管理逻辑。

![](https://github.com/Token-Economy-Book/ChineseTranslation/blob/main/pics/1.2-7.png)

## 从可替代共识机制到PoW
比特币的工作量证明是史无前例的，但这是有代价的。在其保证不信任网络的安全时，网络也十分缓慢、高能耗且更偏向有更多经济资源可消耗的用户。这也是许多研究者与开发者开始探索替代的共识机制，并尝试解决一些比特币的主要挑战的原因。需要解决的研究问题有：

*我们如何就大多数用户接受，并就相信为真的唯一版本历史达成共识？
*如何连接稀缺自然资源（比如电力与CPU）与网络资源，来避免恶性用户用恶意行为使整个系统充满垃圾信息？
*会有什么安全风险与攻击向量？

虽然许多共识机制都在经历检验，工作量证明与权益证明（PoS）是近期最被广泛接受的。然而，值得注意的是，使用相同的通用共识机制的区块链网络可能有不同的规格。比特币网络与以太坊网络使用不同的工作量证明种类。

于权益证明也是如此，它是拥有金融利益的网络用户才能向账本中添加区块的共识机制。与工作量证明相反，在权益证明中验证者不会相互竞争来创建一个区块的交易。用户无需消耗能源来验证一个区块，而是必须证明自己持有一定量的网络代币来产生一个区块。钱包中的代币代表了你的权益。权益证明的应用有许多变种。

早期权益证明假设在系统中拥有更多权益的用户在验证交易与写入区块的时候，自然有动力更真诚的进行活动。它也假设代币持有者自然对网络的长期成功感兴趣；否则，如果他们不以真诚的方式为项目做贡献的话，他们在系统中的权益也会贬值。进一步预测到，一个人拥有的代币越多，网络受到攻击时所面临危险就越大。因此在设计时，个人投票权与持有的代币总量时成比例的。然而，工作量证明的挖矿成本高，分叉的收益低，因此浪费资源在分叉上并不明智，与工作量证明相反，原始的权益证明机制有个问题，即在创建区块时不需要高强度的计算工作，假设验证者毫无损失，但收益巨大。

“Peercoin” 网络是首个使用权益证明的项目。其他网络跟进了自己版本的权益证明，比如“Tendermint”（“Cosmos”)，“Ouroboros”(“Cardano”)，“Tezos”“Dfinity”“Nxt““BlackCoin““NuShares/NuBits”，以及“Qora”，每个都有不同资产。有些项目，如“Decred”结合了工作量证明与权益证明的元素。以太坊项目计划用硬分叉（Casper)实现从工作量证明到权益证明的转变。以太坊开发者已研发出几种具体可行的提案。

委托权益证明机制（DPoS）是权益证明的另一个形式，由“BitShares”首次使用。这是根本性的改变，是一种代议制民主，代币持有者可以把权利委托给代表，并由她/他们代表自己进行验证。通常会定期更换21到101位选上来的代表，或命令代表交付区块。这些代表可以创建区块并防止不信任方创建区块。代表无法改变交易内容，但有权否决特定交易被下一个网络区块接受。不同的网络已开始使用各自版本的DPoS，比如“Steemit“，”EOS“，and”Lisk“。与相互竞争来验证区块不同，这里每个代表都有一段时间来发布自己的区块。如果代表不断错过自己的区块，或发布无效交易，代币持有者有权收回对一个代表的投票。此种部分中心化的区块产生方式带来了与大部分共识机制相比，更大的交易吞吐量（“也被成为可扩展性”）。

权益证明的变式更为多样，许多只是概念性的，或只有一个网络在使用：“租赁权益证明 ”、“交易作为权益证明”、“重要性证明”、“容量证明”、“权重证明”、“权威证明”以及“消逝时间证明”。

拜占庭式容错（BFT)：另一组共识机制是拜占庭式容错变式，如“Ripple” 或“Stellar”使用的联邦拜占庭协议（FBA）“Hyperledger Fabric”使用的实用拜占庭容错(pBFT)，“NEO”使用的代表拜占庭容错（dBFT）。同时其他协议使用混合机制，比如“Hashgraph”结合了异步拜占庭容错与“gossip 协议”加“虚拟投票”机制。

有向无环图：另外，使用有向无环图的项目有许多，例如“IoT Chain,” “Byteball,” “Nano” (Block Lattice)以及 IOTA (Tangle)。DAGs共识机制与区块链有根本不同。与将数据捆绑起来放入区块，然后依次进行确认不同，有向无环图要求新添加的数据引用且验证过去的数据。通常而言，每个新交易需要引用并验证两个过去的数据。依次，网络会产生一个聚合且经确认的交易图表。若有个节点错误的验证了一个过去交易，其他参与者确认该节点的交易也会失败。

详细解释上述每一个共识机制已超出本书的范畴，这需要一本甚至多本针对性的出版物才能完成。有关分布式账本上的这些协议的文章仍较稀缺，但正在不断增加。然而许多的协议仍在概念阶段，暂无较好的文章总结。许多的例子也只用于一个项目，有时缺少合适的研究，或缺少学术上相互评审的过程。

![](https://github.com/Token-Economy-Book/ChineseTranslation/blob/main/pics/1.2-8.png)

## 有无代币？
随着衍生技术开始使用原始比特币协议的改进治理规则，我们有必要将不同的分布式账本进行分类。其核心区别在于，从设计上谁有权（1）验证交易，（2）向账本中写入交易，（3）读取交易，（4）使用网络。不同类型的网络对上述问题有不同回答。简单来说，通常在公共网络中，任何人都有权读写、验证交易，并使用网络。但在私人网络中，只有受邀成员才有权读写、验证交易，并使用网络。混合的变式机制也是可行的。比如需要受邀许可才能验证与写入交易，但人人都可查询（特定）交易。在公开与无需许可网络中，由于各节点事前并不相识，所有参与到共识协议中的节点都互不信任。若无中心化实体的许可，任何人都可下载协议与最新版本的账本，并：

*在本地设备中运行全节点，验证网络中的交易。
*挖出一个区块的交易，向账本写入数据，由此参与到共识进程中（工作量证明）并从中获得网络代币。
*通过网络发送代币，若交易有效则理应在账本中能看到该交易。
*使用公开的区块链浏览器软件来阅读网络中所有交易相关的数据，或对全节点上所有区块链相关数据进行链分析（大数据）。

此类共识机制设计也解释了恶意行为的出现。代币是网络中互不信任的用户攻击抵抗者的必要组件。在代币化激励保障了互不信任的网络的安全时，它也使网络变的非常缓慢。公开、无需许可的网络每一秒只能承担少量交易，这使它们无法运行高交易量的大型应用。但在近期，为解决可扩展性问题，人们提出并使用了许多技术解决方案（详见：Annex - Scalability Solutions）。

相反，私人且需许可的账本使用双边合同协议的联合性设置，是邀请制的组织。该网络不会随便开放给参与者。成员间的信任基于各自间的双边合同协议，若有人犯错，他们知道该控诉谁。因此，需许可的账本不需要代币来激励协调工作，然而无需许可的账本必须有代币。提前知晓所有参与节点的身份能天然抵御“女巫攻击”。因此，私人且需许可的账本每秒钟可处理更多交易，因为它们不需要处理一系列匿名节点。由于其账本数据不对公众开放，它们的私密性比现有最先进的公开区块链网络更好。需许可的账本通常由产业联盟开发。由预选的参与者进行交易验证，例如有60家金融机构，每个都操作一个节点，然后为了验证区块，40家必须对每个区块签名。根据行业与用例，账本数据读取的权利可公开，部分公开或只对内开放。

虽然绝大多数区块链著作将需要许可与无需许可二元区分开，但这里想强调，没有所谓的“百分之一百无需许可”。每个共识机制都需要最低投资门槛，来保证验证交易与写入账本的的能力。然而，世界上绝大多数人没有足够经济能力，去购买足够强大的特种机器挖取比特币。即使是在公众区块链网络中只验证交易的全节点，不需要与挖矿节点相同级别硬件，也需要投资一个常规个人电脑。在本书撰写之时，购买一台个人电脑意味着要花至少几百欧元验证交易。虽然500欧元对一个普通欧洲家庭不算什么，但仍超过了世界上许多家庭的月收入，更不用说挖矿电脑的成本。

另外，比如基于“权益证明”的共识是公开的，但非完全无需许可。共识机制要求用户持有一定量的网络代币才符合验证交易的条件。因此“无需许可”是一个相对的词，我们不能二元地使用它，而是有梯度的，从“无需许可”到“完全许可”。在分布式账本系统的早期，需许可方案在需要建立分布式账本但受政府监管的高度监管行业是有用的。行业支持者称联合解决方案更加高效且安全，同时减少传统金融机构的欺骗问题。私人区块链不大可能颠覆现有金融系统，但可以替代遗产系统，使行业更高效。一旦底层技术规模更大更成熟，监管者对其理解加深，需许可账本更能比公开无需许可网络的应用更为广泛。

该技术在中长期是否会成功尚且未知。有人预测需许可账本会与20世纪90年代的“公司内部网”的命运相同，因为它们害怕与公众网络相连，私人公司会建立自己的网络。随着时间的发展，这种恐惧慢慢消退。如今企业内部网只在安全性要求极高的地方少量使用。

## 用例与应用
区块链网络与衍生分布式账本系统为权利管理提供了基础设施。每个进程、任务与支付都有数字记录与签名，来进行身份识别、验证、存储与分享。如律师，经纪人、银行家、公共管理者等中介机构也许会被分布式账本替代。只需少量摩擦以及小部分现有交易费用，个人、组织、机器以及算法就能相互交互。新的基础设施带来了更多新应用，最重要的是：
透明度与控制：区块链网络与其他分布式账本能更透明，更有力度地控制供应链上的产品与服务，包括通证化的金融服务，这能解决供应链透明度中的许多问题，减少腐败，更好地控制私人数据。

减少官僚主义：智能合约与类似权利管理方案有机会减少官僚主义，减少商业交易地协调成本（详见第二部分-智能合约）。

解决组织中的委托代理问题：分布式账本为全球协调工具提供了新的去中心化类型，以及匿名组织。（详见：第二部分-DAOs的制度经济学与治理）。

杀手级应用-代币：加密代币作为区块链网络的应用以及衍生账本技术或许与WWW的出现一样具有革命意义，WWW出现后，只需几行代码就能创造出吸人眼球的网页，只需下方链接就能浏览网络，无需使用命令行接口。就如几行智能合约代码就能创造代币一样轻松（详见第三、四部分）。

分布式账本的其中一个最大用例在于，产品溯源与提高供应链上的商品与服务的透明度。供应链代表了一个空间上分离，法律上独立的复杂实体群，其中的商品、支付以及文档通过动态网络进行交换。它们与区块链网络的架构类似，但又与区块链网络相反，所有文件由数据仓独立管理。因此在此类供应链网络中的文件传递系统是低效的，交互复杂，成本较高。较难追踪且奖励稳定的公司与个人行为。买卖双方对产品的出处，是否存在潜在欺骗，污染以及侵犯人权的情况知之甚少，甚至毫无信息来源。

分布式账本使得供应链上互不相干的网络用户无缝交换信息。文件与交易可几乎实时处理，这是因为可以自动化审核和强制执行，减轻多重文件数据副本与前后不一致的问题。如今，在全球供应链中追踪产品与服务的出处更为可行。基于Web3的解决方案可提供（1）更高的环境影响透明度，以及（2）食物的起源，生产类型与材料，植物的生长条件，如何对待动物等信息。许多公司与行业计划，例如“Provenance,” “Ambrosus,” “Modum,” “OriginTrail,” “Vechain,” “Wabi,” 或“Wantonchain,”开始使用基于Web3的基础设施来优化它们的价值链，改进低效情况，释放运营资金，使商品与服务更易获得。但此类解决方案总需要结合一系列技术，包括机器学习算法，真实世界的数据和物联网(详见第二部分-智能合约预言机）。分布式账本能更好地追究人权责任，例如一般工作条件，童工或合理工资。致力于解决方案地项目：“bext360”、“fairfood” 以及 “Namahe” 进一步使用此类项目能帮助我们更好地掌控私人数据（详见：第一部分- 用户为中心的身份-数据保护），创建P2O数据市场（Ocean Protocol）。虽然理论上讲，得知个人数据如何此类的透明度也可由现有方案提供，但我们需要信任一个中心化机构。

## 本章小结
~
区块链网络是一种公共设施，它可以合作管理共享的分布式账本，网络中的每个电脑都存有该信息的不可变加密副本。

~
账本包含所有已有交易。交易以防干扰的方式进行存储：一个区块的修改会影响随后的区块。存储在网络中所有电脑上的账本，保证了每个代币只能传输一次。它是一个数字公证人，一个公开可验证的时间戳。

~
所有参与者可平等的实时访问相同数据。网络处理的交易对所有用户开放，并可追溯其源头。

~
与分布式数据库不同，区块链允许分布式控制，互不信任的用户无需中心管理员即可分享信息。商业逻辑的算法管理与治理原则，共识协议，与智能合约提高了社会经济活动的自动化水平。

~
区块链的概念建立在P2P网络之上，提供了每个用户都可信任的通用数据组，虽然他们可能互不相识或互不信任。相互不信任的，定居在不同国家，属于不同管辖区，无相互法律限定合约的各方能通过网络进行交互，无需可信任的第三方，比如银行、网络平台会其他类型的清算机构。

~
自二十世纪八十年代，加密保护的P2P网络的概念已在学术圈，在不同发展阶段都有所讨论。但在比特币出现之前，没有一个P2P网络实践能在无信任中间保证价值交换的情况下，成功避免双重支付问题。

~
”双重支付问题“指在现有互联网中，数字货币，文档形式可以被复制，且相同数字文件的副本可从一台电脑同时发送之多台电脑。

~
共识机制，例如为实现分布式控制的工作量证明。它们基于经济激励与密码学的结合。博弈论的应用是为了用原生网络代币奖励网络用户。此种奖励机制在设计上使欺骗网络的行为从经济上十分不实际。它使篡改区块链的行为变得极其困难，因为这需要极其大的算力。

~
与公开且无需许可的网络相反，人们需要被邀请才能进入需许可的网络，这意味着所有验证者都是合伙人成员。

~
“分布式账本”是十分涵盖性的词汇，它被用来描述分布式记录的技术，或所有技术正在使用的信息，无论需不需要许可，以及它们共识机制的独立性如何，或其数据结构如何。

